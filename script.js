const quizData = {
  "Photosynthesis": [
    {
      question: "Which gas is released during photosynthesis?",
      options: ["Carbon dioxide", "Oxygen", "Nitrogen", "Hydrogen"],
      answer: "Oxygen"
    },
    {
      question: "What organelle is responsible for photosynthesis?",
      options: ["Mitochondria", "Chloroplast", "Nucleus", "Ribosome"],
      answer: "Chloroplast"
    },
    {
      question: "Plants use oxygen...",
      options: ["continuously", "During the day only", "During the nihgt only", "During photosynthesis only"],
      answer: "continuously"
    },
    {
      question: "The green, light-trapping pigment in photosynthesis found in plant leaves is?",
      options: ["Chloroplast", "Chlorophyll", "Anthocyanin", "Caarotene"],
      answer: "Chlorophyll"
    },
    {
      question: "Molecule that stores energy?",
      options: ["ATP", "ADP", "DNA", "RNA"],
      answer:  "ATP"
    }
  ],
  "Animal Nutrition": [
    {
      question: "Which enzyme digests proteins in the stomach?",
      options: ["Amylase", "Lipase", "Pepsin", "Maltase"],
      answer: "Pepsin"
    },
    {
      question: "If the pancreatic duct is cut.",
      options: ["protein digestion will not be affected",
      "Homeostatic control of glucose will be affected",
      "Carbohydrates digestion will be affected",
      "Carbohydrates digestion will not be affected"],
      answer: "Carbohydrates digestion will be affected"
    },
    {
      question: "What is the function of the salivary glands in the mouth?",
      options: [
        "To churn food with acid",
        "To grind food mechanically",
        "To release enzymes that chemically digest carbohydrates",
        "To absorb nutrients into the blood"
      ],
      answer: "To release enzymes that chemically digest carbohydrates"
    },
    {
      question: "What prevents food from entering the trachea?",
      options: [
        "Larynx",
        "Epiglottis",
        "Tongue",
        "Palate"
      ],
      answer: "Epiglottis"
    },
    {
      question: "What is the main process that moves food down the oesophagus?",
      options: [
        "Churning",
        "Diffusion",
        "Swallowing",
        "Peristalsis"
      ],
      answer: "Peristalsis"
    },
    {
      question: "What is chyme?",
      options: [
        "Partially digested food mixed with gastric juices",
        "Food and saliva in the mouth",
        "Waste in the rectumn",
        "Bile mixed with pancreatic juices"
      ],
      answer: "Partially digested food mixed with gastric juices"
    },
    {
      question: "Which organ stores bile before it's released into the small intestine?",
      options: [
        "Liver",
        "Pancreas",
        "Gall bladder",
        "Stomach"
      ],
      answer: "Gall bladder"
    },
    {
      question: "Which of the following is a function of bile?",
      options: [
        "Emulsifies fats and neutralizes chyme",
        "Produces insulin",
        "Digests proteins",
        "Absorbs nutrients"
      ],
      answer: "Emulsifies fats and neutralizes chyme"
    },
    {
      question: "What part of the small intestine receives bile and pancreatic juice?",
      options: [
        "Ileum",
        "Duodenum",
        "Jejunum",
        "Colon"
      ],
      answer: "Duodenum"
    },
    {
      question: "What is a villus?",
      options: [
        "A muscle that contracts the stomach",
        "A small flap preventing food entry into lungs",
        "A finger-like projection for absorption",
        "A section of the large intestine"
      ],
      answer: "A finger-like projection for absorption"
    },
    {
      question: "Which gland helps regulate blood glucose levels?",
      options: [
        "Salivary gland",
        "Pancreas (endocrine function)",
        "Gall bladder",
        "Stomach"
      ],
      answer: "Pancreas (endocrine function)"
    },
    {
      question: "What is the correct order of digestive processes?",
      options: [
        "Digestion → Ingestion → Absorption → Egestion",
        "Ingestion → Absorption → Digestion → Egestion",
        "Ingestion → Digestion → Absorption → Egestion",
        "Assimilation → Ingestion → Digestion → Egestion"
      ],
      answer: "Ingestion → Digestion → Absorption → Egestion"
    },
    {
      question: "What is a bolus?",
      options: [
        "A hormone secreted by the liver",
        "A fluid in the small intestine",
        "A mass of chewed food and saliva",
        "An enzyme that digests lipids"
      ],
      answer: "A mass of chewed food and saliva"
    },
    {
      question: "What is the function of the soft palate?",
      options: [
        "Secretes bile",
        "Secretes saliva",
        "Forms the roof of the mouth",
        "Pushes food into the stomach"
      ],
      answer: "Forms the roof of the mouth"
    },
    {
      question: "Which part of the digestive system churns food and mixes it with acid?",
      options: [
        "Mouth",
        "Oesophagus",
        "Stomach",
        "Small intestine"
      ],
      answer: "Stomach"
    },
    {
      question: "What is assimilation?",
      options: [
        "Swallowing food",
        "Breaking down nutrients",
        "Removing waste",
        "Using nutrients in cells"
      ],
      answer: "Using nutrients in cells"
    },
    {
      question: "Which part of the digestive system is most responsible for nutrient absorption?",
      options: [
        "Stomach",
        "Small intestine",
        "Large intestine",
        "Pancreas"
      ],
      answer: "Small intestine"
    },
    {
      question: "What is the main site of nutrient absorption?",
      options: ["Stomach", "Large intestine", "Small intestine", "rectumn"],
      answer: "Small intestine"
    },
    {
      question: "Whih ONE of the following is not part of the alimentary canal?",
      options: ["Stomach", "Colon", "Pancreas", "Appendix"],
      answer: "Appendix"
    },
    {
      question: "Where does emulsification of fat occur?in the...",
      options: ["Liver", "Colon", "Gallbladder", "Small intestine"],
      answer: "Small intestine"
    }
  ],
  "Respiration": [
    {
      question: "What is the main product of cellular respiration?",
      options: ["Oxygen", "Carbon dioxide", "ATP", "Glucose"],
      answer: "ATP"
    },
    {
      question: "Name the biochemical process used to brew traditional African BEER.",
      options: ["Fermentation", "Reproduction", "photosynthesis", "sunlight"],
      answer: "Fermentation"
    },
    {
      question: "The conversion of pyruvic acid into lactic acid occurs during",
      options: ["Photolysis", "Glycolysis", "Anaerobic respiration", "Oxidation of glucose"],
      answer: "Anaerobic respiration"
    },
    {
      question: "The phase that does not require oxygen during cellular respiration:",
      options: ["Krebs cycle", "Glycolysis", "Oxidative phosphorylation", "ALL OF THEM"],
      answer: "Glycolysis"
    },
    {
      question: "The process during which glucose is converted into pyruvic acid.",
      options: ["Krebs cycle", "Glycolysis", "Oxidative phosphorylation", "Photolysis"],
      answer: "Glycolysis"
    },
    {
      question: "The reagent used to test for the presence of carbon dioxide.",
      options: ["Iodine solution", "Benedict’s solution", "Limewater", "Ethanol"],
      answer: "Limewater"
    },
    {
      question: "The acid that accumulates in the muscles of humans during continuous strenuous physical activity.",
      options: ["Pyruvic acid", "Citric acid", "Lactic acid", "Acetic acid"],
      answer: "Lactic acid"
    },
    {
      question: "The gas which is essential for the Krebs cycle to occur.",
      options: ["Carbon dioxide", "Oxygen", "Hydrogen", "Nitrogen"],
      answer: "Oxygen"
    },
    {
      question: "Folded structures found on the inner membrane of a mitochondrion.",
      options: ["Grana", "Cristae", "Villi", "Cilia"],
      answer: "Cristae"
    },
    {
      question: "The stage of aerobic respiration that releases carbon dioxide.",
      options: ["Glycolysis", "Krebs cycle", "Electron transport chain", "Fermentation"],
      answer: "Krebs cycle"
    },
    {
      question: "Genetic material found in the mitochondrial matrix.",
      options: ["DNA", "mRNA", "Chromatin", "tRNA"],
      answer: "DNA"
    },
    {
      question: "The stage during aerobic respiration when water is released as a waste product.",
      options: ["Glycolysis", "Krebs cycle", "Electron transport chain", "Fermentation"],
      answer: "Electron transport chain"
    }, 
    {
      question: "The type of anaerobic respiration that occurs in yeast cells.",
      options: ["Lactic acid fermentation", "Alcoholic fermentation", "Aerobic respiration", "Photosynthesis"],
      answer: "Alcoholic fermentation"
    },
    {
      question: "The organelle in which respiration takes place.",
      options: ["Chloroplast", "Ribosome", "Nucleus", "Mitochondrion"],
      answer: "Mitochondrion"
    },
    {
      question: "The end product of anaerobic respiration in humans",
      options: ["Lactic acid", "Ethanol"],
      answer: "Lactic acid"
    },
    {
      question: "A product of cellular respiration which supplies energy needed for metabolic reactions in cells",
      options: ["ATP", "Oxygen"],
      answer: "ATP"
    },
    {
      question: "The fuel required for cellular respiration",
      options: ["Glycogen", "Glucagon"],
      answer: "Glycogen"
    },
    {
      question: "Which of the following uses fermentation in its production?",
      options: ["Bread", "Chips", "Soda water", "Orange juice"],
      answer: "Bread"
    },
    {
      question: "How does fermentation-based food production help the South African economy?",
      options: [
      "It helps reduce inflation",
      "It reduces food imports",
      "It creates jobs and boosts local industry",
      "It reduces energy use in households"
    ],
    answer: "It creates jobs and boosts local industry"
    },
    {
      question: "Molecule that stores energy",
      options: ["ADP", "ATP"],
      answer: "ATP"
    }
 ],
  "Gas Exchange": [
    {
      question: "Where does gas exchange occur in humans?",
      options: ["Trachea", "Alveoli", "Bronchi", "Diaphragm"],
      answer: "Alveoli"
    }
  ],
  "Excretion In Humans": [
    {
      question: "Which organ filters blood to form urine?",
      options: ["Heart", "Liver", "Kidney", "Lung"],
      answer: "Kidney"
    }
  ],
  "Biodiversity And Classification Of Microorganisms": [
    {
      question: "Which kingdom do bacteria belong to?",
      options: ["Protista", "Monera", "Fungi", "Plantae"],
      answer: "Monera"
    }
  ],
  "Biodiversity In Plants And Reproduction": [
    {
      question: "Which part of the flower produces pollen?",
      options: ["Style", "Ovary", "Anther", "Petal"],
      answer: "Anther"
    }
  ],
  "Biodiversity Of Animals": [
    {
      question: "Which group includes animals with a backbone?",
      options: ["Invertebrates", "Vertebrates", "Arthropods", "Mollusks"],
      answer: "Vertebrates"
    }
  ],
  "Population Ecology": [
    {
      question: "What is carrying capacity?",
      options: [
        "Number of predators",
        "Maximum number of individuals an environment can support",
        "Birth rate",
        "Death rate"
      ],
      answer: "Maximum number of individuals an environment can support"
    }
  ],
  "Human Impact On The Environment": [
    {
      question: "Which gas contributes most to global warming?",
      options: ["Oxygen", "Carbon dioxide", "Nitrogen", "Methane"],
      answer: "Carbon dioxide"
    }
  ]
};

const topicSelect = document.getElementById("topic-select");
const startBtn = document.getElementById("start-btn");
const quizContainer = document.querySelector(".quiz-container");
const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const nextBtn = document.getElementById("next-btn");

let currentQuestionIndex = 0;
let currentTopicQuestions = [];
let score = 0;

startBtn.addEventListener("click", () => {
  const selectedTopic = topicSelect.value;
  if (!selectedTopic) return alert("Please select a topic.");

  // Prepare quiz
  currentTopicQuestions = [...quizData[selectedTopic]];
  shuffleArray(currentTopicQuestions);
  currentQuestionIndex = 0;
  score = 0;

  document.querySelector(".topic-select").style.display = "none";
  quizContainer.style.display = "block";
  loadQuestion();
});

nextBtn.addEventListener("click", () => {
  currentQuestionIndex++;
  if (currentQuestionIndex < currentTopicQuestions.length) {
    loadQuestion();
  } else {
    showResults();
  }
});

function loadQuestion() {
  const currentQ = currentTopicQuestions[currentQuestionIndex];
  questionEl.textContent = currentQ.question;
  optionsEl.innerHTML = "";
  nextBtn.disabled = true;

  currentQ.options.forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option;
    btn.addEventListener("click", () => selectAnswer(btn, currentQ.answer));
    optionsEl.appendChild(btn);
  });
}

function selectAnswer(button, correctAnswer) {
  const buttons = optionsEl.querySelectorAll("button");
  buttons.forEach(btn => {
    btn.disabled = true;
    if (btn.textContent === correctAnswer) {
      btn.style.backgroundColor = "lightgreen";
    } else {
      btn.style.backgroundColor = "lightcoral";
    }
  });

  if (button.textContent === correctAnswer) {
    score++;
  }

  nextBtn.disabled = false;
}

function showResults() {
  quizContainer.innerHTML = `
    <h2>Quiz Completed</h2>
    <p>Your Score: ${score} / ${currentTopicQuestions.length}</p>
    <button onclick="location.reload()">Try Another Topic</button>
  `;
}

function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}
